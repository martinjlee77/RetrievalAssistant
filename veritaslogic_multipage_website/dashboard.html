<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - VeritasLogic.ai</title>
    
    <!-- SEO and Security -->
    <meta name="description" content="Manage your VeritasLogic account, track your usage, and access your ASC analysis tools.">
    <meta name="robots" content="noindex, nofollow">
    <link rel="canonical" href="https://veritaslogic.ai/dashboard.html">
    <meta name="referrer" content="no-referrer">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css?v=2025090702">
    <!-- Stripe JavaScript -->
    <script src="https://js.stripe.com/v3/"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="icon" type="image/favicon/png" href="/images/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/favicon/svg+xml" href="/images/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/images/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="VeritasLogic" />
    <link rel="manifest" href="/images/favicon/site.webmanifest" />
    
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="/" class="logo">VeritasLogic.ai</a>
            <ul class="nav-links">
                <li class="platform-nav-item">
                    <a href="/analysis" class="platform-nav-link" id="navPlatformLink" target="_blank">
                        <span class="nav-status-dot" id="navStatusDot"></span>
                        <span class="nav-platform-text">Analysis Platform</span>
                        <span class="nav-platform-status" id="navPlatformStatus">Checking...</span>
                    </a>
                </li>
                <li><a href="/" class="btn btn-secondary btn-nav">Home</a></li>
                <li><button onclick="logout()" class="btn btn-secondary btn-nav">Log Out</button></li>
            </ul>
        </div>
    </nav>

    <div class="dashboard-container pt-fixed-nav" id="dashboardContent">
        <!-- Loading state -->
        <div class="loading" id="loadingState">
            <p>Loading your dashboard...</p>
        </div>

        <!-- Inline Login Form -->
        <div id="loginSection" class="hidden">
            <div class="login-form-container">
                <div class="login-form">
                    <h2>üîê Sign In to Your Dashboard</h2>
                    <p>Enter your email and password to access your account.</p>
                    
                    <div id="loginMessage" aria-live="polite"></div>
                    
                    <form id="dashboardLoginForm">
                        <div class="form-group">
                            <label for="loginEmail">Email Address</label>
                            <input type="email" id="loginEmail" name="email" placeholder="your.email@company.com" required autocomplete="email">
                        </div>
                        
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" name="password" required autocomplete="current-password">
                        </div>
                        
                        <button type="submit" class="form-submit" id="loginButton">
                            Sign In
                        </button>
                    </form>
                    
                    <div class="login-links">
                        <p>Don't have an account? <a href="signup.html">Sign up here</a></p>
                        <p><a href="/">‚Üê Back to homepage</a></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Email Verification Required Section -->
        <div id="verificationSection" class="hidden">
            <div class="verification-container">
                <div class="verification-card">
                    <div class="verification-header">
                        <h2>üìß Please Verify Your Email Address</h2>
                        <p>To access your dashboard and start using VeritasLogic, please verify your email address.</p>
                    </div>
                    
                    <div class="verification-status">
                        <div class="email-display">
                            <span class="email-label">We sent a verification email to:</span>
                            <span class="email-address" id="verificationEmail">your-email@domain.com</span>
                        </div>
                        
                        <div class="verification-instructions">
                            <h3>üìã What to do next:</h3>
                            <ol>
                                <li><strong>Check your email inbox</strong> for a message from VeritasLogic</li>
                                <li><strong>Click the verification link</strong> in the email</li>
                                <li><strong>Return to this page</strong> - your dashboard will unlock automatically</li>
                            </ol>
                        </div>
                        
                        <div id="verificationMessage" aria-live="polite" class="verification-message"></div>
                        
                        <div class="verification-actions">
                            <button onclick="resendVerification()" class="btn btn-primary" id="resendBtn">
                                üìß Resend Verification Email
                            </button>
                            <button onclick="checkVerificationStatus()" class="btn btn-secondary" id="refreshBtn">
                                üîÑ I've Verified - Refresh Dashboard
                            </button>
                        </div>
                        
                        <div class="verification-help">
                            <h4>üí° Didn't receive the email?</h4>
                            <ul>
                                <li>Check your <strong>spam/junk folder</strong></li>
                                <li>Add <strong>support@veritaslogic.ai</strong> to your contacts</li>
                                <li>Wait a few minutes for delivery</li>
                                <li>Contact <a href="mailto:support@veritaslogic.ai">support@veritaslogic.ai</a> if you still need help</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Sidebar (shown when authenticated) -->
        <div class="dashboard-sidebar hidden" id="dashboardSidebar">
            <div class="sidebar-header">
                <h3>Dashboard</h3>
            </div>
            <div class="sidebar-footer">
                <a href="/analysis" class="btn btn--primary" target="_blank" rel="noopener noreferrer">
                    <span class="nav-icon">auto_awesome</span>
                    Click Here to Start Analysis
                </a>
            </div>
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" onclick="showSection('overview')">
                    <span class="nav-icon">dashboard</span>
                    <span class="nav-text">Overview</span>
                </a>
                <a href="#subscription" class="nav-item" onclick="showSection('subscription')">
                    <span class="nav-icon">workspace_premium</span>
                    <span class="nav-text">Subscription</span>
                </a>
                <a href="#profile" class="nav-item" onclick="showSection('profile')">
                    <span class="nav-icon">person</span>
                    <span class="nav-text">Profile</span>
                </a>
                <a href="#history" class="nav-item" onclick="showSection('history')">
                    <span class="nav-icon">history</span>
                    <span class="nav-text">History</span>
                </a>
            </nav>

        </div>

        <!-- Dashboard Main Content (shown when authenticated) -->
        <div class="dashboard-main hidden" id="dashboardMain">
            <!-- Main dashboard content -->
            <div id="mainContent" class="hidden">
            <div class="dashboard-header">
                <div class="welcome-section">
                    <h1>Welcome back, <span id="userName">User</span>!</h1>
                    <p id="memberSince">Member since</p>
                </div>
            </div>

            <!-- Overview Section -->
            <div id="overviewSection" class="dashboard-section active">
            
                <div class="dashboard-grid">
                    <!-- Subscription Status Card -->
                    <div class="card balance-card">
                        <h2><span class="nav-icon">workspace_premium</span>
                            Subscription Status
                        </h2>
                        
                        <div class="subscription-display" id="subscriptionDisplay">
                            <div class="subscription-plan">
                                <div class="plan-name" id="planName">Loading...</div>
                                <div class="plan-status" id="planStatus"></div>
                            </div>
                            <div class="word-allowance">
                                <div class="words-remaining" id="wordsRemaining">
                                    <span class="number">0</span> words remaining
                                </div>
                                <div class="words-total" id="wordsTotal">of 0 total</div>
                            </div>
                            <div class="renewal-info" id="renewalInfo"></div>
                        </div>
                        
                        <button onclick="showSection('subscription')" class="btn btn--secondary">
                            <span class="nav-icon">upgrade</span>
                            Manage Subscription
                        </button>
                    </div>
                    
                    <!-- Usage Stats Card -->
                    <div class="card stats-card">
                        <h2><span class="nav-icon">bar_chart</span>
                            Usage Statistics
                        </h2>
                        <div class="usage-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="totalAnalyses">0</div>
                                <div class="stat-label">Total Analyses</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="thisMonth">0</div>
                                <div class="stat-label">This Month</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="sinceInception">0</div>
                                <div class="stat-label">Since Inception</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Platform Status Card -->
                    <div class="card platform-status-card">
                        <h2><span class="nav-icon">dns</span>
                            Platform Status
                        </h2>
                        <div class="platform-status">
                            <div class="status-item">
                                <div class="status-indicator" id="mainPlatformStatus">
                                    <span class="status-dot checking"></span>
                                    <span class="status-label">Main Platform</span>
                                </div>
                                <div class="status-value">Active</div>
                            </div>
                            <div class="status-item">
                                <div class="status-indicator" id="analysisPlatformStatus">
                                    <span class="status-dot checking"></span>
                                    <span class="status-label">Analysis Platform</span>
                                </div>
                                <div class="status-value" id="analysisPlatformValue">Checking...</div>
                            </div>
                            <div class="status-item">
                                <div class="status-indicator" id="databaseStatus">
                                    <span class="status-dot online"></span>
                                    <span class="status-label">Database</span>
                                </div>
                                <div class="status-value">Connected</div>
                            </div>
                        </div>
                        <div class="platform-actions">
                            <a href="/analysis" class="btn btn--primary" id="platformLaunchBtn" target="_blank" rel="noopener noreferrer">
                                    <span class="nav-icon">auto_awesome</span>
                                    Click Here to Start Analysis
                            </a>
                        </div>
                    </div>

                    <!-- Support Card -->
                    <div class="card support-card">
                        <h2>
                            Need Help?
                        </h2>
                        <div class="support-content">
                            <p>If you have any questions or need support, please email us at <a href="mailto:support@veritaslogic.ai">support@veritaslogic.ai</a>.</p>
                        </div>
                    </div>
                </div>
            </div>

                <!-- Subscription Section -->
                <div id="subscriptionSection" class="dashboard-section">
                    <h2 class="subscription-main-title">Manage Your Subscription</h2>
                    
                    <!-- Current Plan Card -->
                    <div class="card subscription-details-card">
                        <h3>Current Plan</h3>
                        <div class="current-plan-details">
                            <div class="plan-header">
                                <span class="plan-badge" id="currentPlanBadge">Free Trial</span>
                                <span class="plan-price" id="currentPlanPrice">$0/month</span>
                            </div>
                            <div class="plan-features" id="currentPlanFeatures">
                                <div class="feature-item">
                                    <span class="feature-icon">‚úì</span>
                                    <span>Loading plan details...</span>
                                </div>
                            </div>
                            <div class="plan-usage" id="planUsage">
                                <div class="usage-bar-container">
                                    <div class="usage-bar" id="usageBar"></div>
                                </div>
                                <div class="usage-stats">
                                    <span id="wordsUsedStat">0 words used</span>
                                    <span id="wordsAvailableStat">0 words available</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Upgrade Options -->
                    <div class="card upgrade-options-card">
                        <h3>Upgrade Your Plan</h3>
                        <p class="upgrade-intro">Get more word allowance and unlock advanced features.</p>
                        
                        <div class="subscription-plans" id="subscriptionPlans">
                            <!-- Professional Plan -->
                            <div class="plan-option" data-plan="professional">
                                <div class="plan-option-header">
                                    <h4>Professional</h4>
                                    <div class="plan-option-price">$295<span>/month</span></div>
                                </div>
                                <ul class="plan-option-features">
                                    <li>30,000 words/month</li>
                                    <li>All ASC standards</li>
                                    <li>Priority support</li>
                                    <li>Rollover unused words</li>
                                </ul>
                                <button onclick="upgradeToPlan('professional')" class="btn btn-primary">
                                    Upgrade to Professional
                                </button>
                            </div>

                            <!-- Team Plan -->
                            <div class="plan-option popular" data-plan="team">
                                <div class="popular-badge">Most Popular</div>
                                <div class="plan-option-header">
                                    <h4>Team</h4>
                                    <div class="plan-option-price">$595<span>/month</span></div>
                                </div>
                                <ul class="plan-option-features">
                                    <li>75,000 words/month</li>
                                    <li>All ASC standards</li>
                                    <li>Priority support</li>
                                    <li>Rollover unused words</li>
                                    <li>Team collaboration</li>
                                </ul>
                                <button onclick="upgradeToPlan('team')" class="btn btn-primary">
                                    Upgrade to Team
                                </button>
                            </div>

                            <!-- Enterprise Plan -->
                            <div class="plan-option" data-plan="enterprise">
                                <div class="plan-option-header">
                                    <h4>Enterprise</h4>
                                    <div class="plan-option-price">$1,195<span>/month</span></div>
                                </div>
                                <ul class="plan-option-features">
                                    <li>180,000 words/month</li>
                                    <li>All ASC standards</li>
                                    <li>Dedicated support</li>
                                    <li>Rollover unused words</li>
                                    <li>Team collaboration</li>
                                    <li>Custom integrations</li>
                                </ul>
                                <button onclick="upgradeToPlan('enterprise')" class="btn btn-primary">
                                    Upgrade to Enterprise
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Billing & Cancel -->
                    <div class="card billing-management-card">
                        <h3>Billing Management</h3>
                        <div class="billing-actions">
                            <button onclick="updatePaymentMethod()" class="btn btn-secondary">
                                <span class="nav-icon">credit_card</span>
                                Update Payment Method
                            </button>
                            <button onclick="viewInvoiceHistory()" class="btn btn-secondary">
                                <span class="nav-icon">receipt</span>
                                View Invoice History
                            </button>
                            <button onclick="cancelSubscription()" class="btn btn-tertiary">
                                <span class="nav-icon">cancel</span>
                                Cancel Subscription
                            </button>
                        </div>
                    </div>
                </div>

            <!-- Profile Section -->
            <div id="profileSection" class="dashboard-section">
                <h2 class="profile-main-title">Profile & Security</h2>
                <p class="profile-intro">Manage your account settings and update your password.</p>

                <div class="profile-grid">
                    <div class="card profile-info-card">
                        <h3>Account Information</h3>
                        <div class="profile-fields">
                            <div class="profile-field">
                                <span class="field-label">First Name:</span>
                                <span class="field-value" id="userFirstName">-</span>
                            </div>
                            <div class="profile-field">
                                <span class="field-label">Last Name:</span>
                                <span class="field-value" id="userLastName">-</span>
                            </div>
                            <div class="profile-field">
                                <span class="field-label">Email:</span>
                                <span class="field-value" id="userEmail">-</span>
                            </div>
                            <div class="profile-field">
                                <span class="field-label">Company:</span>
                                <span class="field-value" id="userCompany">-</span>
                            </div>
                            <div class="profile-field">
                                <span class="field-label">Member Since:</span>
                                <span class="field-value" id="memberSinceDate">-</span>
                            </div>
                            <div class="profile-field">
                                <span class="field-label">Account Status:</span>
                                <span class="field-value" id="accountStatus">Active</span>
                            </div>
                        </div>
                        
                        <!-- Edit Profile Section -->
                        <div class="edit-profile-section">
                            <h4>Edit Name</h4>
                            <div id="editProfileMessage" aria-live="polite"></div>
                            <form id="editProfileForm" class="mt-md" onsubmit="submitProfileUpdate(event)">
                                <div class="form-group">
                                    <label for="editFirstName">First Name</label>
                                    <input type="text" id="editFirstName" name="firstName" required placeholder="Enter your first name" autocomplete="given-name">
                                </div>
                                
                                <div class="form-group">
                                    <label for="editLastName">Last Name</label>
                                    <input type="text" id="editLastName" name="lastName" required placeholder="Enter your last name" autocomplete="family-name">
                                </div>
                                
                                <button type="submit" class="btn btn-primary" id="updateProfileButton">
                                    Update Name
                                </button>
                            </form>
                        </div>
                    </div>

                    <div class="card password-card">
                
                        <h3>Change Password</h3>
                    <div id="changePasswordMessage" aria-live="polite"></div>
                    <form id="changePasswordForm" class="mt-md">
                        <div class="form-group">
                            <label for="currentPassword">Current Password</label>
                            <input type="password" id="currentPassword" name="currentPassword" required placeholder="Enter your current password" autocomplete="current-password">
                        </div>
                        
                        <div class="form-group">
                            <label for="newPassword">New Password</label>
                            <div class="password-wrapper">
                                <input type="password" id="newPassword" name="newPassword" required placeholder="Enter your new password" autocomplete="new-password">
                                <div class="password-helper">
                                    <span class="password-helper-icon">?</span>
                                    <div class="password-tooltip">
                                        <small>Password must contain at least:</small>
                                        <ul>
                                            <li id="req-length">8 characters</li>
                                            <li id="req-uppercase">One uppercase letter</li>
                                            <li id="req-lowercase">One lowercase letter</li>
                                            <li id="req-number">One number</li>
                                            <li id="req-special">One special character</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmNewPassword">Confirm New Password</label>
                            <input type="password" id="confirmNewPassword" name="confirmNewPassword" required placeholder="Confirm your new password" autocomplete="new-password">
                            <div id="password-match" class="password-feedback"></div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary" id="changePasswordButton">
                            Update Password
                        </button>
                        </form>
                    </div>
                </div>
            </div>


            <!-- History Section -->
            <div id="historySection" class="dashboard-section">
                <h2 class="history-main-title">Analysis History</h2>
                <p class="history-intro">View your recent analyses.</p>

                
                <div class="card history-card">
                    <div id="recentAnalysesList" class="recent-analyses">
                        <div class="empty-state">
                            <div>üìÑ</div>
                            <p>No analyses yet. Ready to get started?</p>
                            <a href="/analysis" class="btn btn-primary" target="_blank">Run Your First Analysis</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>

    <script src="dashboard.js" defer></script>
    
</html>