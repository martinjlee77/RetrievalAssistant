Description of the Issue
In the "EXECUTIVE SUMMARY" section, under "KEY FINDINGS," the lists for Revenue Recognition and Critical Judgments are not formatted as proper bullet points. They appear as a block of indented text, which is clunky and difficult to read.

Example from Memo:

Revenue Recognition:**
Logi-AI Suite SaaS License: Over Time
Hardware Provisioning: Point in Time
Professional Services: Point in Time
Critical Judgments:**

Determining the likelihood of achieving the performance bonus required
significant judgment.
Allocation of the performance bonus as variable consideration to the SaaS License
performance obligation.

A professional summary should use clear, scannable bullet points for these items.

Analysis of Current Code
This formatting issue originates in the prompt that generates the Executive Summary: get_enhanced_executive_summary_prompt in step_prompts.py.

The prompt constructs the "KEY FINDINGS" section by directly inserting Python variables into a string. The lists (recognition_methods, critical_judgments) are simply joined together with commas or newlines, not formatted as markdown bullet points.

Here is the problematic prompt section in step_prompts.py:

# In step_prompts.py, inside get_enhanced_executive_summary_prompt

# ... after structured data is extracted ...

# The prompt creates the KEY FINDINGS section like this:
        return f"""...
**KEY FINDINGS** (Scannable dashboard format)
- **ASC 606 Contract Exists:** {contract_exists}
- **Performance Obligations:** {po_count} distinct obligation{'s' if po_count != 1 else ''}{(' - ' + ', '.join(po_descriptions[:2])) if po_descriptions else ''}{'...' if len(po_descriptions) > 2 else ''}
- **Transaction Price:** {total_price}{' (includes variable consideration)' if has_variable_consideration else ''}
- **Allocation:** {allocation_method}
- **Revenue Recognition:** {', '.join(recognition_methods[:2]) if recognition_methods else 'Not applicable'}{'...' if len(recognition_methods) > 2 else ''}
- **Critical Judgments:** {', '.join(critical_judgments) if critical_judgments else 'None identified'}
...
"""

The line ', '.join(critical_judgments) joins the list items into a single string separated by commas, which the AI then seems to be reformatting into the awkward indented block.

Proposed Changes
We will fix this by programmatically formatting the lists into proper markdown bullet points before they are inserted into the prompt. This removes ambiguity and forces the output to be correctly formatted.

Here are the step-by-step instructions:

Open the file: step_prompts.py
Navigate to the get_enhanced_executive_summary_prompt method.
Add code to format the recognition_methods and critical_judgments lists into markdown strings.
Update the final return statement to use these new formatted strings.
This is the section of code you need to modify:

# CODE SECTION TO MODIFY (inside get_enhanced_executive_summary_prompt):

        # ... (code to extract critical_judgments) ...

        return f"""You are writing the Executive Summary for a professional ASC 606 technical accounting memo.

# ... (rest of the prompt) ...

- **Revenue Recognition:** {', '.join(recognition_methods[:2]) if recognition_methods else 'Not applicable'}{'...' if len(recognition_methods) > 2 else ''}
- **Critical Judgments:** {', '.join(critical_judgments) if critical_judgments else 'None identified'}

# ... (rest of the prompt) ...
"""

Instruction: Add the new formatting logic and update the return statement as shown below.

# NEW, IMPROVED CODE SECTION:
        # ... (code to extract critical_judgments) ...

        # NEW: Format lists as proper markdown bullet points
        recognition_list_str = "\n".join([f"  - {item}" for item in recognition_methods]) if recognition_methods else "  - None applicable"
        judgments_list_str = "\n".join([f"  - {item}" for item in critical_judgments]) if critical_judgments else "  - None identified"

        return f"""You are writing the Executive Summary for a professional ASC 606 technical accounting memo.

ANALYSIS CONTEXT:
- Contract Analysis: {analysis_title}
- Customer: {customer_name}

STRUCTURED DATA FROM 5-STEP ANALYSIS:
- ASC 606 Contract Exists: {contract_exists}
- Performance Obligations Count: {po_count}
- Performance Obligations: {po_descriptions}
- Total Transaction Price: {total_price}
- Has Variable Consideration: {"Yes" if has_variable_consideration else "No"}
- Allocation Method: {allocation_method}
- Revenue Recognition Methods: {recognition_methods}

YOUR TASK:
Synthesize the **structured data provided above** into a cohesive, executive-level summary. Your conclusions in the summary MUST be directly supported by the findings in the structured data. Do not introduce new analysis. The structured data is your single source of truth for this task, as it was derived from a rigorous application of the knowledge hierarchy (Contract → Authoritative → Interpretative).

SECTION STRUCTURE & REQUIREMENTS:

**OVERALL CONCLUSION** (2-3 sentences maximum)
- Provide the strategic, bottom-line accounting determination based on the structured data
- State the total transaction price and high-level revenue recognition approach
- Confirm ASC 606 compliance
- **Critical Rule**: This is a narrative summary, NOT a detailed listing of components

**KEY FINDINGS** (Scannable dashboard format)
- **ASC 606 Contract Exists:** {contract_exists}
- **Performance Obligations:** {po_count} distinct obligation{'s' if po_count != 1 else ''}{(' - ' + ', '.join(po_descriptions[:2])) if po_descriptions else ''}{'...' if len(po_descriptions) > 2 else ''}
- **Transaction Price:** {total_price}{' (includes variable consideration)' if has_variable_consideration else ''}
- **Allocation:** {allocation_method}
- **Revenue Recognition:**
{recognition_list_str}
- **Critical Judgments:**
{judgments_list_str}

**PROFESSIONAL STANDARDS:**
- Write with the authority and precision expected in Big 4 audit documentation
- Ensure internal consistency with the detailed 5-step analysis that preceded this summary
- Focus on decision-useful information for senior stakeholders

Use the structured data provided above to create a cohesive, executive-level summary that respects readers' time while providing comprehensive oversight of the accounting conclusions."""

This change replaces the simple .join() with a proper markdown list format (\n  - item). This ensures the final output will have clean, correctly formatted bullet points, significantly improving the readability of the executive summary.