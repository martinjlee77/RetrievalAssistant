Worker
Deployments
Variables
Metrics
Settings
Unexposed service
us-east4-eqdc4a
1 Replica




History



















Worker
/
4a6d5483
Active

Oct 21, 2025, 9:19 AM
Details
Build Logs
Deploy Logs
Filter and search logs

You reached the start of the range
Oct 21, 2025, 9:19 AM
Starting Container
2025-10-21 13:20:30,522 - shared.redis_connection - INFO - ‚úì Connected to production Redis
2025-10-21 13:20:30,525 - __main__ - INFO - üöÄ RQ Worker started. Waiting for jobs...
2025-10-21 13:20:30,456 - shared.redis_connection - INFO - Attempting to connect to Redis: redis://default:caASCJiqLuOysPZqbElpmjCYEfHmSylU@redis.railway.internal:6379
2025-10-21 13:20:30,526 - rq.worker - INFO - Worker 6f64c203ad1243a88df175f9181f21a1: started with PID 1, version 2.6.0
2025-10-21 13:20:30,526 - rq.worker - INFO - Worker 6f64c203ad1243a88df175f9181f21a1: subscribing to channel rq:pubsub:6f64c203ad1243a88df175f9181f21a1
2025-10-21 13:20:30,531 - rq.worker - INFO - *** Listening on analysis...
2025-10-21 13:20:30,533 - rq.worker - INFO - Worker 6f64c203ad1243a88df175f9181f21a1: cleaning registries for queue: analysis
2025-10-21 13:21:22,382 - rq.worker - INFO - analysis: workers.analysis_worker.run_asc606_analysis({'analysis_id': 50, 'user_id': 7, 'user_token': 'eyJhbGciOiJIUzI1NiIsInR5cC...) (50)
2025-10-21 13:21:24,039 - workers.analysis_worker - INFO - üöÄ Worker starting ASC 606 analysis: 50
2025-10-21 13:21:24.039 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:21:24.039 WARNING streamlit.runtime.state.session_state_proxy: Session state does not function when running a script without `streamlit run`
2025-10-21 13:21:24.039 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:21:24.039 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:21:24.039 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:21:24,039 - shared.api_cost_tracker - INFO - API cost tracker reset
2025-10-21 13:21:24,066 - asc606.step_analyzer - INFO - ü§ñ Using GPT-4o for main analysis, GPT-4o-mini for light tasks
2025-10-21 13:21:24,089 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2025-10-21 13:21:24,186 - shared.knowledge_base - INFO - ChromaDB client initialized for asc606_knowledge_base
2025-10-21 13:21:24,193 - shared.knowledge_base - INFO - Embedding function initialized successfully
2025-10-21 13:21:24,194 - shared.knowledge_base - INFO - Collection 'asc606_guidance' loaded successfully
2025-10-21 13:21:24,194 - asc606.knowledge_search - INFO - ASC 606 knowledge search initialized successfully
2025-10-21 13:21:24,194 - workers.analysis_worker - INFO - üìä Processing Step 1/5
2025-10-21 13:21:24,195 - shared.knowledge_base - INFO - üîç Querying asc606_guidance knowledge base...
2025-10-21 13:21:24,617 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-21 13:21:24,693 - shared.knowledge_base - INFO - ‚úì Retrieved 8 chunks from ChromaDB (0.50s)
2025-10-21 13:21:24,693 - asc606.knowledge_search - INFO - Retrieved guidance for Step 1
2025-10-21 13:21:24,693 - asc606.step_analyzer - INFO - ‚Üí Step 1: Starting analysis using gpt-4o...
2025-10-21 13:21:39,072 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:21:39,042 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-21 13:21:39.072 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:21:39.072 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:21:39,776 - shared.knowledge_base - INFO - üîç Querying asc606_guidance knowledge base...
2025-10-21 13:21:39,774 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:21:39,775 - shared.api_cost_tracker - INFO - API Cost - Model: gpt-4o, Input tokens: 2741, Output tokens: 697, Cost: $0.0242
2025-10-21 13:21:39,775 - shared.api_cost_tracker - INFO - Tracked step_1_analysis request: $0.0242 (Total: $0.0242)
2025-10-21 13:21:39,775 - asc606.step_analyzer - INFO - ‚úì Step 1: Completed in 15.1s
2025-10-21 13:21:39,775 - workers.analysis_worker - INFO - ‚úì Completed Step 1
2025-10-21 13:21:39,776 - workers.analysis_worker - INFO - üìä Processing Step 2/5
2025-10-21 13:21:40,471 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-21 13:21:40,476 - shared.knowledge_base - INFO - ‚úì Retrieved 8 chunks from ChromaDB (0.70s)
2025-10-21 13:21:40,476 - asc606.knowledge_search - INFO - Retrieved guidance for Step 2
2025-10-21 13:21:40,476 - asc606.step_analyzer - INFO - ‚Üí Step 2: Starting analysis using gpt-4o...
2025-10-21 13:21:40,476 - asc606.step_analyzer - INFO - üí∞ Extracting transaction price components and variable consideration...
2025-10-21 13:21:52,457 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-21 13:21:52.467 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:21:52.467 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:21:52,467 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:21:52,471 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:21:52,471 - shared.api_cost_tracker - INFO - API Cost - Model: gpt-4o, Input tokens: 2823, Output tokens: 802, Cost: $0.0261
2025-10-21 13:21:52,471 - shared.api_cost_tracker - INFO - Tracked step_2_analysis request: $0.0261 (Total: $0.0503)
2025-10-21 13:21:52,471 - asc606.step_analyzer - INFO - ‚úì Step 2: Completed in 12.0s
2025-10-21 13:21:52,471 - workers.analysis_worker - INFO - ‚úì Completed Step 2
2025-10-21 13:21:52,472 - workers.analysis_worker - INFO - üìä Processing Step 3/5
2025-10-21 13:21:52,473 - shared.knowledge_base - INFO - üîç Querying asc606_guidance knowledge base...
2025-10-21 13:21:52,654 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-21 13:21:52,659 - shared.knowledge_base - INFO - ‚úì Retrieved 8 chunks from ChromaDB (0.19s)
2025-10-21 13:21:52,659 - asc606.knowledge_search - INFO - Retrieved guidance for Step 3
2025-10-21 13:21:52,659 - asc606.step_analyzer - INFO - ‚Üí Step 3: Starting analysis using gpt-4o...
2025-10-21 13:22:10,320 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-21 13:22:10.338 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:22:10.339 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:22:10,339 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:22:10,341 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:22:10,342 - shared.api_cost_tracker - INFO - API Cost - Model: gpt-4o, Input tokens: 2590, Output tokens: 724, Cost: $0.0238
2025-10-21 13:22:10,342 - shared.api_cost_tracker - INFO - Tracked step_3_analysis request: $0.0238 (Total: $0.0741)
2025-10-21 13:22:10,342 - asc606.step_analyzer - INFO - ‚úì Step 3: Completed in 17.7s
2025-10-21 13:22:10,342 - workers.analysis_worker - INFO - ‚úì Completed Step 3
2025-10-21 13:22:10,343 - workers.analysis_worker - INFO - üìä Processing Step 4/5
2025-10-21 13:22:10,343 - shared.knowledge_base - INFO - üîç Querying asc606_guidance knowledge base...
2025-10-21 13:22:10,676 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-21 13:22:10,681 - shared.knowledge_base - INFO - ‚úì Retrieved 8 chunks from ChromaDB (0.34s)
2025-10-21 13:22:10,681 - asc606.knowledge_search - INFO - Retrieved guidance for Step 4
2025-10-21 13:22:10,681 - asc606.step_analyzer - INFO - ‚Üí Step 4: Starting analysis using gpt-4o...
2025-10-21 13:22:21,954 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-21 13:22:21.962 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:22:21.962 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:22:21,962 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:22:21,966 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:22:21,966 - shared.api_cost_tracker - INFO - API Cost - Model: gpt-4o, Input tokens: 2370, Output tokens: 490, Cost: $0.0192
2025-10-21 13:22:21,967 - shared.api_cost_tracker - INFO - Tracked step_4_analysis request: $0.0192 (Total: $0.0933)
2025-10-21 13:22:21,967 - asc606.step_analyzer - INFO - ‚úì Step 4: Completed in 11.3s
2025-10-21 13:22:21,967 - workers.analysis_worker - INFO - ‚úì Completed Step 4
2025-10-21 13:22:21,968 - workers.analysis_worker - INFO - üìä Processing Step 5/5
2025-10-21 13:22:21,968 - shared.knowledge_base - INFO - üîç Querying asc606_guidance knowledge base...
2025-10-21 13:22:23,015 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2025-10-21 13:22:23,020 - shared.knowledge_base - INFO - ‚úì Retrieved 8 chunks from ChromaDB (1.05s)
2025-10-21 13:22:23,020 - asc606.knowledge_search - INFO - Retrieved guidance for Step 5
2025-10-21 13:22:23,020 - asc606.step_analyzer - INFO - ‚Üí Step 5: Starting analysis using gpt-4o...
2025-10-21 13:22:33,175 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-21 13:22:33.177 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:22:33.177 WARNING streamlit.runtime.scriptrunner_utils.script_run_context: Thread 'MainThread': missing ScriptRunContext! This warning can be ignored when running in bare mode.
2025-10-21 13:22:33,177 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:22:33,181 - shared.api_cost_tracker - WARNING - Failed to get encoding for model gpt-4o, using default: 'Could not automatically map gpt-4o to a tokeniser. Please use `tiktok.get_encoding` to explicitly get the tokeniser you expect.'
2025-10-21 13:22:33,182 - shared.api_cost_tracker - INFO - API Cost - Model: gpt-4o, Input tokens: 2455, Output tokens: 616, Cost: $0.0215
2025-10-21 13:22:33,182 - shared.api_cost_tracker - INFO - Tracked step_5_analysis request: $0.0215 (Total: $0.1148)
2025-10-21 13:22:33,182 - asc606.step_analyzer - INFO - ‚úì Step 5: Completed in 10.2s
2025-10-21 13:22:33,182 - workers.analysis_worker - INFO - ‚úì Completed Step 5
2025-10-21 13:22:33,182 - workers.analysis_worker - INFO - üìù Generating final memo...
2025-10-21 13:22:33,183 - workers.analysis_worker - INFO - ‚Üí Generating executive summary, background, and conclusion...
2025-10-21 13:22:33,183 - asc606.step_analyzer - INFO - Extracting conclusions from 5 steps
2025-10-21 13:22:33,184 - asc606.step_analyzer - INFO - Extracted conclusion for Step 1 (length: 261 chars)
2025-10-21 13:22:33,184 - asc606.step_analyzer - INFO - Extracted conclusion for Step 2 (length: 402 chars)
2025-10-21 13:22:33,184 - asc606.step_analyzer - INFO - Extracted conclusion for Step 3 (length: 437 chars)
2025-10-21 13:22:33,184 - asc606.step_analyzer - INFO - Extracted conclusion for Step 4 (length: 428 chars)
2025-10-21 13:22:33,184 - asc606.step_analyzer - INFO - Extracted conclusion for Step 5 (length: 454 chars)
2025-10-21 13:22:33,184 - asc606.step_analyzer - INFO - Total conclusions extracted: 5, text length: 2030
2025-10-21 13:22:33,184 - asc606.step_analyzer - INFO - ‚Üí Generating executive summary...
2025-10-21 13:22:37,006 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-21 13:22:37,017 - asc606.step_analyzer - INFO - ‚úì Executive summary generated (1315 chars)
2025-10-21 13:22:37,017 - asc606.step_analyzer - INFO - ‚Üí Generating background section...
2025-10-21 13:22:40,341 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-21 13:22:40,361 - asc606.step_analyzer - INFO - ‚úì Background section generated (542 chars)
2025-10-21 13:22:40,361 - asc606.step_analyzer - INFO - ‚Üí Generating final conclusion...
2025-10-21 13:22:42,592 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2025-10-21 13:22:42,593 - asc606.step_analyzer - INFO - ‚úì Final conclusion generated (571 chars)
2025-10-21 13:22:42,593 - asc606.clean_memo_generator - INFO - Added clean step 1 content (3148 chars)
2025-10-21 13:22:42,593 - asc606.clean_memo_generator - INFO - Added clean step 2 content (3680 chars)